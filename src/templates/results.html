{% extends "base.html" %}

{% block title %}
Results
{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto py-6 px-4">
  <h1 class="text-3xl font-bold text-center mb-8 text-golden">Search Results</h1>

  <!-- Optionally, show the query or a "Refine Search" link back to /search -->
  <!-- <p class="text-center text-cream mb-4">Showing results for: {{ request.args.title }}</p> -->

  <!-- Movies Grid -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5">
    {% for movie in movies %}
      <div class="bg-taupe p-3 rounded-md shadow-md flex flex-col h-full">
        <div class="mb-4">
          <!-- Title -->
          <h2 class="text-lg font-semibold text-cream mb-1 leading-tight">
            {{ movie.title }}
          </h2>
          <!-- Categories -->
          <p class="text-sm text-cream mb-1">
            <span class="font-medium">Categories:</span> {{ movie.listedIn }}
          </p>
          <!-- Year (if exists) -->
          {% if movie.release_year %}
            <p class="text-sm text-cream mb-1">
              <span class="font-medium">Year:</span> {{ movie.release_year }}
            </p>
          {% endif %}
          <!-- Type (if exists) -->
          {% if movie.type %}
            <p class="text-sm text-cream">
              <span class="font-medium">Type:</span> {{ movie.type }}
            </p>
          {% endif %}
        </div>
        <!-- Add to Watchlist Button -->
        <div class="mt-auto">
          <form method="POST" action="{{ url_for('add_to_watchlist') }}">
            <input type="hidden" name="showId" value="{{ movie.showId }}">
            <button 
              type="submit" 
              class="bg-golden text-dark-forest w-full py-2 rounded hover:bg-opacity-80 transition-colors 
                     text-sm font-medium focus:outline-none focus:ring-2 focus:ring-cream focus:ring-offset-2
                     focus:ring-offset-taupe"
            >
              Add to Watchlist
            </button>
          </form>
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- No results message -->
  {% if movies|length == 0 %}
    <p class="text-cream text-center mt-8">No movies found matching your search.</p>
  {% endif %}
</div>
{% endblock %}
